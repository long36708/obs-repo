/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var w=Object.defineProperty;var V=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var R=Object.prototype.hasOwnProperty;var $=(b,a,i)=>a in b?w(b,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):b[a]=i;var A=(b,a)=>{for(var i in a)w(b,i,{get:a[i],enumerable:!0})},B=(b,a,i,e)=>{if(a&&typeof a=="object"||typeof a=="function")for(let t of D(a))!R.call(b,t)&&t!==i&&w(b,t,{get:()=>a[t],enumerable:!(e=V(a,t))||e.enumerable});return b};var F=b=>B(w({},"__esModule",{value:!0}),b);var h=(b,a,i)=>$(b,typeof a!="symbol"?a+"":a,i);var z={};A(z,{default:()=>k});module.exports=F(z);var d=require("obsidian");var L={themeAware:!0,dividerColor:"#6aa9ff",dividerThickness:2,dividerOpacity:1,dividerStyle:"solid",blockBgColor:"#2b2b2b",blockTextColor:"#e0e0e0",titleTextColor:"#7aa2ff",alternatingShading:!1,showBorders:!1,borderRadius:4,borderThickness:2,blockPadding:12,blockGap:0,showToolbar:!1,dividerHoverColor:"#8bbdff",dragActiveShadow:"rgba(0,0,0,0.08)"},C=class extends d.MarkdownRenderChild{constructor(i,e,t,s,n){super(i);h(this,"plugin");h(this,"manager");h(this,"sourcePath");h(this,"rawLink");h(this,"leaf",null);h(this,"view",null);h(this,"file",null);h(this,"section",null);h(this,"isProgrammaticUpdate",!1);h(this,"isSaving",!1);h(this,"originalHeader","");h(this,"headerLevel",0);h(this,"lastCorrectedLineNumber",-1);h(this,"debouncedSectionSave",null);this.plugin=e,this.manager=t,this.sourcePath=s,this.rawLink=n}async onload(){this.containerEl.empty(),this.containerEl.classList.add("horizontal-blocks-embed");let i=this.resolveLink(this.rawLink);if(!i){this.renderError("Unable to resolve embed target.");return}if(i.section&&i.section.startsWith("^")){this.renderError("Block reference embeds are not supported yet.");return}let{file:e,section:t}=i;if(!e){this.renderError("Embedded note not found.");return}if(e.path===this.sourcePath&&!t){this.renderError("Cannot embed the current note within itself.");return}this.file=e,this.section=t;try{let s=d.WorkspaceLeaf;this.leaf=s.length===0?new s:new s(this.plugin.app),await this.leaf.openFile(e,{state:{mode:"source"}});let n=this.leaf.view;if(!(n instanceof d.MarkdownView)){this.renderError("Failed to render embed as markdown."),await this.teardownLeaf();return}this.view=n;let l=n.editor;if(t&&!await this.setupSectionSync(n,e,t)){await this.teardownLeaf();return}n.containerEl.classList.add("horizontal-blocks-embed-view-container"),this.containerEl.appendChild(n.containerEl),this.manager.registerEmbed(this),n.containerEl.setAttribute("data-hblock-embed-target",t!=null?t:e.path)}catch(s){console.error("Horizontal Blocks: failed to load embed",s),this.renderError("Error loading embedded note."),await this.teardownLeaf()}}async onunload(){this.manager.unregisterEmbed(this),this.debouncedSectionSave&&this.debouncedSectionSave.cancel&&this.debouncedSectionSave.cancel(),await this.teardownLeaf()}getEditor(){var i,e;return(e=(i=this.view)==null?void 0:i.editor)!=null?e:null}getView(){return this.view}getFile(){return this.file}getSection(){return this.section}resolveLink(i){let[e]=i.split("|");if(!e)return null;let t=e.indexOf("#"),s=t>=0,n=s?e.slice(0,t):e,l=s&&e.slice(t+1).length>0?e.slice(t+1):null,r=this.plugin.app.metadataCache.getFirstLinkpathDest(n||this.sourcePath,this.sourcePath);return r&&r.extension!=="md"?{file:null,section:null}:{file:r,section:l}}async setupSectionSync(i,e,t){let s=i.editor,n=async()=>{var u;this.isProgrammaticUpdate=!0;let r=await this.plugin.app.vault.read(e),o=this.extractSection(r,t);this.updateHeaderState(o);let c=s.getCursor();s.setValue(o),s.lineCount()>c.line&&((u=s.getLine(c.line))==null?void 0:u.length)>=c.ch&&s.setCursor(c),window.setTimeout(()=>this.isProgrammaticUpdate=!1,50)};await n(),i.file=null;let l=(0,d.debounce)(async()=>{if(this.isSaving)return;this.isSaving=!0;let r=s.getValue(),o=await this.plugin.app.vault.read(e),c=this.replaceSection(o,t,r);c!==o&&await this.plugin.app.vault.modify(e,c),this.isSaving=!1},750,!0);return this.debouncedSectionSave=l,this.registerEvent(this.plugin.app.vault.on("modify",async r=>{r.path===e.path&&!this.isSaving&&await n()})),this.registerEvent(this.plugin.app.workspace.on("editor-change",r=>{if(r!==s||this.isProgrammaticUpdate)return;let o=r.getCursor(),c=r.getLine(o.line);if(o.line===0&&c!==this.originalHeader){this.isProgrammaticUpdate=!0,r.replaceRange(this.originalHeader,{line:0,ch:0},{line:0,ch:c.length}),this.isProgrammaticUpdate=!1;return}if(o.line>0&&c.trim().startsWith("#")){let g=(c.match(/^#+/)||[""])[0].length,p=this.headerLevel+1,v="#".repeat(p);if(o.line===this.lastCorrectedLineNumber&&g<p){this.isProgrammaticUpdate=!0,r.replaceRange("",{line:o.line,ch:0},{line:o.line,ch:g}),this.isProgrammaticUpdate=!1,this.lastCorrectedLineNumber=-1,l();return}g<=this.headerLevel?(this.isProgrammaticUpdate=!0,r.replaceRange(v,{line:o.line,ch:0},{line:o.line,ch:g}),this.lastCorrectedLineNumber=o.line,this.isProgrammaticUpdate=!1):this.lastCorrectedLineNumber=-1}else this.lastCorrectedLineNumber=-1;l()})),!0}updateHeaderState(i){var e;this.originalHeader=i.split(`
`)[0]||"",this.headerLevel=(((e=this.originalHeader.match(/^#+/))==null?void 0:e[0])||"#").length}extractSection(i,e){var o;let t=i.split(`
`),s=new RegExp(`^#{1,6}\\s+${this.escapeRegExp(e)}\\s*$`),n=-1,l=0;for(let c=0;c<t.length;c++)if(s.test(t[c])){n=c,l=(((o=t[c].match(/^#+/))==null?void 0:o[0])||"").length;break}if(n===-1)return`# ${e}

*Section not found.*`;let r=t.length;for(let c=n+1;c<t.length;c++){let u=t[c].match(/^#+/);if(u&&u[0].length<=l){r=c;break}}return t.slice(n,r).join(`
`)}replaceSection(i,e,t){var g;let s=i.split(`
`),n=new RegExp(`^#{1,6}\\s+${this.escapeRegExp(e)}\\s*$`),l=-1,r=0;for(let p=0;p<s.length;p++)if(n.test(s[p])){l=p,r=(((g=s[p].match(/^#+/))==null?void 0:g[0])||"").length;break}if(l===-1)return`${i.trim()}

${t}`.trim();let o=s.length;for(let p=l+1;p<s.length;p++){let v=s[p].match(/^#+/);if(v&&v[0].length<=r){o=p;break}}let c=s.slice(0,l),u=s.slice(o);return[...c,...t.split(`
`),...u].join(`
`)}escapeRegExp(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}async teardownLeaf(){this.leaf&&(this.leaf.detach(),this.leaf=null),this.view=null}renderError(i){this.containerEl.empty(),this.containerEl.createDiv("horizontal-blocks-embed-error").setText(i)}},S=class{constructor(a){h(this,"plugin");h(this,"embedRegistry",new Map);h(this,"currentFocusedEmbed",null);h(this,"originalExecuteCommand",null);h(this,"originalGetActiveViewOfType",null);h(this,"focusInListener",null);h(this,"focusOutListener",null);this.plugin=a}registerEmbed(a){this.embedRegistry.set(a.containerEl,a),this.ensureHooks()}unregisterEmbed(a){this.embedRegistry.delete(a.containerEl),this.currentFocusedEmbed===a&&(this.currentFocusedEmbed=null),this.embedRegistry.size===0&&this.removeHooks()}dispose(){this.embedRegistry.clear(),this.currentFocusedEmbed=null,this.removeHooks()}ensureHooks(){this.originalExecuteCommand||(this.overrideCommands(),this.overrideGetActiveView(),this.attachFocusListeners())}overrideCommands(){var e;let a=(e=this.plugin.app)==null?void 0:e.commands;if(!a)return;this.originalExecuteCommand=a.executeCommand;let i={"editor:toggle-checklist-status":t=>this.toggleChecklist(t),"editor:toggle-bold":t=>this.toggleMarkdownFormatting(t,"**"),"editor:toggle-italics":t=>this.toggleMarkdownFormatting(t,"*"),"editor:toggle-strikethrough":t=>this.toggleMarkdownFormatting(t,"~~"),"editor:toggle-code":t=>this.toggleMarkdownFormatting(t,"`"),"editor:insert-link":t=>this.insertLink(t),"editor:toggle-bullet-list":t=>this.toggleBulletList(t),"editor:toggle-numbered-list":t=>this.toggleNumberedList(t),"editor:indent-list":t=>this.indentList(t),"editor:unindent-list":t=>this.unindentList(t),"editor:insert-tag":t=>this.insertTag(t),"editor:swap-line-up":t=>this.swapLineUp(t),"editor:swap-line-down":t=>this.swapLineDown(t),"editor:duplicate-line":t=>this.duplicateLine(t),"editor:delete-line":t=>this.deleteLine(t)};a.executeCommand=(t,...s)=>{var l;let n=this.currentFocusedEmbed;if(n&&(t!=null&&t.id)){let r=i[t.id];if(r){let o=r(n);if(o)return o}}return(l=this.originalExecuteCommand)==null?void 0:l.call(a,t,...s)}}overrideGetActiveView(){let a=this.plugin.app.workspace;this.originalGetActiveViewOfType=a.getActiveViewOfType,a.getActiveViewOfType=i=>{var s;let e=this.currentFocusedEmbed,t=e==null?void 0:e.getView();return t&&t instanceof i?t:(s=this.originalGetActiveViewOfType)==null?void 0:s.call(a,i)}}attachFocusListeners(){this.focusInListener=a=>{let i=a.target,e=this.findEmbedForElement(i);e&&(this.currentFocusedEmbed=e)},this.focusOutListener=a=>{let i=a.relatedTarget;this.findEmbedForElement(i)||(this.currentFocusedEmbed=null)},document.addEventListener("focusin",this.focusInListener,!0),document.addEventListener("focusout",this.focusOutListener,!0)}removeHooks(){var e;let a=(e=this.plugin.app)==null?void 0:e.commands;this.originalExecuteCommand&&a&&(a.executeCommand=this.originalExecuteCommand,this.originalExecuteCommand=null);let i=this.plugin.app.workspace;this.originalGetActiveViewOfType&&i&&(i.getActiveViewOfType=this.originalGetActiveViewOfType,this.originalGetActiveViewOfType=null),this.focusInListener&&(document.removeEventListener("focusin",this.focusInListener,!0),this.focusInListener=null),this.focusOutListener&&(document.removeEventListener("focusout",this.focusOutListener,!0),this.focusOutListener=null)}findEmbedForElement(a){let i=a;for(;i;){let e=this.embedRegistry.get(i);if(e)return e;i=i.parentElement}return null}toggleChecklist(a){var s,n;let i=a.getEditor();if(!i)return!1;let e=i.getCursor(),t=i.getLine(e.line);if(/^\s*- \[ \]/.test(t))i.replaceRange(t.replace(/- \[ \]/,"- [x]"),{line:e.line,ch:0},{line:e.line,ch:t.length});else if(/^\s*- \[x\]/i.test(t))i.replaceRange(t.replace(/- \[x\]/i,"- [ ]"),{line:e.line,ch:0},{line:e.line,ch:t.length});else{let l=(n=(s=t.match(/^\s*/))==null?void 0:s[0])!=null?n:"",r=t.substring(l.length);i.replaceRange(`${l}- [ ] ${r}`,{line:e.line,ch:0},{line:e.line,ch:t.length})}return!0}toggleMarkdownFormatting(a,i){let e=a.getEditor();if(!e)return!1;let t=e.getSelection(),s=i.length;if(t&&t.startsWith(i)&&t.endsWith(i))e.replaceSelection(t.slice(s,-s));else if(t)e.replaceSelection(`${i}${t}${i}`);else{let n=e.getCursor();e.replaceRange(i+i,n),e.setCursor({line:n.line,ch:n.ch+s})}return!0}insertLink(a){let i=a.getEditor();if(!i)return!1;let e=i.getSelection();if(e)i.replaceSelection(`[[${e}]]`);else{let t=i.getCursor();i.replaceRange("[[]]",t),i.setCursor({line:t.line,ch:t.ch+2})}return!0}toggleBulletList(a){let i=a.getEditor();if(!i)return!1;let e=i.getCursor(),t=i.getLine(e.line);return/^\s*- /.test(t)?i.replaceRange(t.replace(/^\s*- /,""),{line:e.line,ch:0},{line:e.line,ch:t.length}):i.replaceRange(`- ${t}`,{line:e.line,ch:0},{line:e.line,ch:t.length}),!0}toggleNumberedList(a){let i=a.getEditor();if(!i)return!1;let e=i.getCursor(),t=i.getLine(e.line);return/^\s*\d+\. /.test(t)?i.replaceRange(t.replace(/^\s*\d+\. /,""),{line:e.line,ch:0},{line:e.line,ch:t.length}):i.replaceRange(`1. ${t}`,{line:e.line,ch:0},{line:e.line,ch:t.length}),!0}indentList(a){let i=a.getEditor();if(!i)return!1;let e=i.getCursor();return i.replaceRange("	",{line:e.line,ch:0}),!0}unindentList(a){let i=a.getEditor();if(!i)return!1;let e=i.getCursor();return i.getLine(e.line).startsWith("	")&&i.replaceRange("",{line:e.line,ch:0},{line:e.line,ch:1}),!0}insertTag(a){let i=a.getEditor();return i?(i.replaceSelection("#"),!0):!1}swapLineUp(a){let i=a.getEditor();if(!i)return!1;let e=i.getCursor();if(e.line>0){let t=i.getLine(e.line),s=i.getLine(e.line-1);i.transaction({changes:[{from:{line:e.line-1,ch:0},to:{line:e.line-1,ch:s.length},text:t},{from:{line:e.line,ch:0},to:{line:e.line,ch:t.length},text:s}],selection:{from:{line:e.line-1,ch:e.ch}}})}return!0}swapLineDown(a){let i=a.getEditor();if(!i)return!1;let e=i.getCursor();if(e.line<i.lastLine()){let t=i.getLine(e.line),s=i.getLine(e.line+1);i.transaction({changes:[{from:{line:e.line,ch:0},to:{line:e.line,ch:t.length},text:s},{from:{line:e.line+1,ch:0},to:{line:e.line+1,ch:s.length},text:t}],selection:{from:{line:e.line+1,ch:e.ch}}})}return!0}duplicateLine(a){let i=a.getEditor();if(!i)return!1;let e=i.getCursor(),t=i.getLine(e.line);return i.replaceRange(`
${t}`,{line:e.line,ch:t.length}),!0}deleteLine(a){let i=a.getEditor();if(!i)return!1;let{line:e}=i.getCursor();return i.replaceRange("",{line:e,ch:0},{line:e+1,ch:0}),!0}},x=class extends d.MarkdownRenderChild{constructor(i,e,t,s){super(i);h(this,"plugin");h(this,"source");h(this,"sourcePath");this.plugin=e,this.source=t,this.sourcePath=s}async onload(){let i=this.containerEl;i.className="horizontal-block-container";let e=await this.plugin.hashString(this.source),t=this.plugin.settings[`horizontal-block-layout-${e}`]||{},s=this.source.split(/^---$/m).map(l=>l.trim()),n=[];for(let l=0;l<s.length;l++){let r=s[l],o=await this.createRenderedBlock(r,t[`title-${l}`]),c=t[`width-${l}`];c?(o.classList.add("hblocks-flex-fixed"),this.plugin.applyBlockWidth(o,c)):o.classList.add("hblocks-flex-grow");let u=t[`bg-${l}`];u&&o.style.setProperty("--hblock-block-bg",u);let g=t[`fg-${l}`];g&&o.style.setProperty("--hblock-text-color",g),n.push(o)}for(let l=0;l<n.length;l++)if(i.appendChild(n[l]),this.attachContextMenu(n[l]),l<n.length-1){let r=document.createElement("div");r.className="hblocks-resizer",i.appendChild(r),this.makeResizable(n[l],n[l+1],r,e,l)}for(let l=0;l<n.length;l++)this.attachToolbar(i,n,e,l)}async createRenderedBlock(i,e){let t=document.createElement("div");if(t.className="hblocks-resizable",e){let l=document.createElement("div");l.className="hblocks-block-title",l.innerText=e,t.appendChild(l)}let s=document.createElement("div");return s.className="hblocks-md-preview",s.classList.add("markdown-rendered"),await d.MarkdownRenderer.render(this.plugin.app,i,s,this.sourcePath,this),s.querySelectorAll("img").forEach(l=>{l.classList.add("hblocks-image")}),this.initializeEditableEmbeds(s),t.appendChild(s),t}initializeEditableEmbeds(i){let e=Array.from(i.querySelectorAll(".internal-embed"));for(let t of e){if(t.classList.contains("image-embed")||t.classList.contains("media-embed"))continue;let s=t.getAttribute("src");if(!s)continue;let[n]=s.split("|");if(!n)continue;let l=n.indexOf("#"),r=l>=0,o=r&&n.slice(l+1).length>0?n.slice(l+1):null;if(o&&o.startsWith("^"))continue;let c=r?n.slice(0,l):n,u=this.plugin.app.metadataCache.getFirstLinkpathDest(c||this.sourcePath,this.sourcePath);if(!u||u.extension!=="md")continue;let g=document.createElement("div");g.classList.add("horizontal-blocks-embed-container"),t.replaceWith(g);let p=new C(g,this.plugin,this.plugin.embedManager,this.sourcePath,s);this.addChild(p)}}makeResizable(i,e,t,s,n){let l=!1,r=0,o=0,c=null,u=null,g=p=>{l=!0,r=p.clientX,o=i.getBoundingClientRect().width,document.body.classList.add("hblocks-resizing-cursor"),document.body.classList.add("hblocks-drag-active"),i.classList.add("hblocks-flex-fixed"),i.classList.remove("hblocks-flex-grow"),e.classList.add("hblocks-flex-grow"),e.classList.remove("hblocks-flex-fixed"),c=v=>{if(!l)return;let y=v.clientX-r,f=o+y;i.classList.add("hblocks-flex-fixed"),i.classList.remove("hblocks-flex-grow"),this.plugin.applyBlockWidth(i,f),e.classList.add("hblocks-flex-grow"),e.classList.remove("hblocks-flex-fixed"),this.plugin.removeBlockWidth(e)},u=async()=>{l=!1,document.body.classList.remove("hblocks-resizing-cursor"),document.body.classList.remove("hblocks-drag-active"),c&&(document.removeEventListener("mousemove",c),c=null),u&&(document.removeEventListener("mouseup",u),u=null);let v=i.getBoundingClientRect().width,y=`horizontal-block-layout-${s}`;this.plugin.settings[y]||(this.plugin.settings[y]={}),this.plugin.settings[y][`width-${n}`]=v,await this.plugin.saveData(this.plugin.settings)},document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)};this.registerDomEvent(t,"mousedown",g)}attachToolbar(i,e,t,s){let n=e[s],l=document.createElement("div");l.classList.add("hblocks-toolbar");let r=document.createElement("input");r.type="color",r.title="Block background",r.className="hblocks-btn";let o=n.style.getPropertyValue("--hblock-block-bg");o&&(r.value=o),r.addEventListener("input",async y=>{let f=y.target.value;n.style.setProperty("--hblock-block-bg",f);let m=`horizontal-block-layout-${t}`;this.plugin.settings[m]||(this.plugin.settings[m]={}),this.plugin.settings[m][`bg-${s}`]=f,await this.plugin.saveData(this.plugin.settings)});let c=document.createElement("input");c.type="color",c.title="Text color",c.className="hblocks-btn";let u=n.style.getPropertyValue("--hblock-text-color");u&&(c.value=u),c.addEventListener("input",async y=>{let f=y.target.value;n.style.setProperty("--hblock-text-color",f);let m=`horizontal-block-layout-${t}`;this.plugin.settings[m]||(this.plugin.settings[m]={}),this.plugin.settings[m][`fg-${s}`]=f,await this.plugin.saveData(this.plugin.settings)});let g=(y,f)=>{let m=document.createElement("button");return m.className="hblocks-btn",m.title=`${f} width`,m.textContent=f,m.addEventListener("click",async P=>{P.preventDefault();let H=n.getBoundingClientRect(),M=Math.max(80,Math.round(H.width+y));n.classList.add("hblocks-flex-fixed"),n.classList.remove("hblocks-flex-grow"),this.plugin.applyBlockWidth(n,M);let E=`horizontal-block-layout-${t}`;this.plugin.settings[E]||(this.plugin.settings[E]={}),this.plugin.settings[E][`width-${s}`]=M,await this.plugin.saveData(this.plugin.settings)}),m},p=g(-32,"-"),v=g(32,"+");l.appendChild(r),l.appendChild(c),l.appendChild(p),l.appendChild(v),n.appendChild(l)}attachContextMenu(i){this.registerDomEvent(i,"contextmenu",e=>{e.preventDefault();let t=new d.Menu,s=this.plugin.style.showToolbar,n=this.plugin.style.showBorders,l=this.plugin.style.alternatingShading;t.addItem(r=>r.setTitle(`${s?"Hide":"Show"} toolbar`).setIcon(s?"eye-off":"eye").onClick(async()=>{this.plugin.style.showToolbar=!s,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()})),t.addItem(r=>r.setTitle(`${n?"Hide":"Show"} borders`).setIcon(n?"minus":"plus").onClick(async()=>{this.plugin.style.showBorders=!n,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()})),t.addItem(r=>r.setTitle(`${l?"Disable":"Enable"} alternating shading`).setIcon("layout").onClick(async()=>{this.plugin.style.alternatingShading=!l,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()})),t.showAtPosition({x:e.pageX,y:e.pageY})})}},k=class extends d.Plugin{constructor(){super(...arguments);h(this,"settings",{});h(this,"styleEl");h(this,"embedManager");h(this,"style",{...L})}async onload(){this.settings=await this.loadData()||{},this.style={...L,...this.settings.style||{}},this.embedManager=new S(this),this.applyStylingVariables();let i=async(e,t,s)=>{let n=new x(t,this,e,s.sourcePath);s.addChild(n)};this.registerMarkdownCodeBlockProcessor("horizontal",i),this.registerMarkdownCodeBlockProcessor("hblock",i),this.addSettingTab(new T(this.app,this))}onunload(){var i;(i=this.embedManager)==null||i.dispose()}async hashString(i){let e=new TextEncoder().encode(i),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(s=>s.toString(16).padStart(2,"0")).join("").slice(0,16)}applyBlockWidth(i,e){i.classList.add("hblocks-has-width"),i.style.setProperty("--hblocks-width",`${Math.round(e)}px`)}removeBlockWidth(i){i.classList.remove("hblocks-has-width"),i.style.removeProperty("--hblocks-width")}async saveStyle(){this.settings.style=this.style,await this.saveData(this.settings)}applyStylingVariables(){let i=this.styleEl||(this.styleEl=document.createElement("style"));i.setAttribute("data-hblocks-style","true"),i.parentElement||document.head.appendChild(i),document.body.classList.toggle("hblocks-no-borders",!this.style.showBorders),document.body.classList.toggle("hblocks-alt-shading",!!this.style.alternatingShading),document.body.classList.toggle("hblocks-toolbar-hidden",!this.style.showToolbar);let e=this.style,t=e.themeAware?"var(--interactive-accent)":e.dividerColor,s=e.themeAware?"var(--text-accent)":e.dividerHoverColor,n=e.themeAware?"var(--background-secondary)":e.blockBgColor,l=e.themeAware?"var(--text-normal)":e.blockTextColor,r=e.themeAware?"var(--text-accent)":e.titleTextColor,o=this.mixColor(n,"#000000",.06);i.textContent=`
      :root {
        --hblock-divider-color: ${t};
        --hblock-divider-thickness: ${Math.max(1,Math.min(5,e.dividerThickness))}px;
        --hblock-divider-opacity: ${Math.max(0,Math.min(1,e.dividerOpacity))};
        --hblock-divider-style: ${e.dividerStyle};

        --hblock-block-bg: ${n};
        --hblock-text-color: ${l};
        --hblock-title-text-color: ${r};
        --hblock-border-radius: ${Math.max(0,e.borderRadius)}px;
        --hblock-border-thickness: ${Math.max(0,e.borderThickness)}px;

        --hblock-block-padding: ${Math.max(0,e.blockPadding)}px;
        --hblock-gap-size: ${Math.max(0,e.blockGap)}px;

        --hblock-divider-hover-color: ${s};
        --hblock-drag-active-shadow: ${e.dragActiveShadow};
      }
      .hblocks-alt-shading .horizontal-block-container .hblocks-resizable:nth-of-type(odd) {
        background-color: ${o};
      }
    `}hexToRgb(i){let e=i.replace("#","").match(/^([0-9a-f]{3}|[0-9a-f]{6})$/i);if(!e)return null;let t=e[1].toLowerCase();t.length===3&&(t=t.split("").map(n=>n+n).join(""));let s=parseInt(t,16);return{r:s>>16&255,g:s>>8&255,b:s&255}}mixColor(i,e,t){if(i.includes("var(")||e.includes("var("))return i;let s=this.hexToRgb(i),n=this.hexToRgb(e);if(!s||!n)return i;let l=Math.round(s.r*(1-t)+n.r*t),r=Math.round(s.g*(1-t)+n.g*t),o=Math.round(s.b*(1-t)+n.b*t);return`#${((1<<24)+(l<<16)+(r<<8)+o).toString(16).slice(1)}`}},T=class extends d.PluginSettingTab{constructor(i,e){super(i,e);h(this,"plugin");this.plugin=e}display(){let{containerEl:i}=this;i.empty(),i.createEl("h2",{text:"Horizontal Blocks \u2013 Styling"}),new d.Setting(i).setName("Theme-aware colors").setDesc("Use theme colors instead of custom picks. Disabling this option will enable color selection in below sections.").addToggle(e=>e.setValue(this.plugin.style.themeAware).onChange(async t=>{this.plugin.style.themeAware=t,await this.plugin.saveStyle(),this.plugin.applyStylingVariables(),this.display()})),i.createEl("h3",{text:"Divider"}),new d.Setting(i).setName("Color").setDesc("Resizer divider color").addColorPicker(e=>e.setValue(this.plugin.style.dividerColor).onChange(async t=>{this.plugin.style.dividerColor=t,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()}).setDisabled(this.plugin.style.themeAware)),new d.Setting(i).setName("Thickness").setDesc("Divider thickness (px)").addSlider(e=>e.setLimits(1,5,1).setValue(this.plugin.style.dividerThickness).onChange(async t=>{this.plugin.style.dividerThickness=t,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()})),new d.Setting(i).setName("Opacity").setDesc("Divider opacity").addSlider(e=>e.setLimits(0,100,5).setValue(Math.round(this.plugin.style.dividerOpacity*100)).onChange(async t=>{this.plugin.style.dividerOpacity=t/100,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()})),new d.Setting(i).setName("Style").setDesc("Divider line style").addDropdown(e=>e.addOptions({solid:"Solid",dashed:"Dashed",dotted:"Dotted",transparent:"Transparent"}).setValue(this.plugin.style.dividerStyle).onChange(async t=>{this.plugin.style.dividerStyle=t,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()})),i.createEl("h3",{text:"Blocks"}),new d.Setting(i).setName("Background color").setDesc("Default background for blocks").addColorPicker(e=>e.setValue(this.plugin.style.blockBgColor).onChange(async t=>{this.plugin.style.blockBgColor=t,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()}).setDisabled(this.plugin.style.themeAware)),new d.Setting(i).setName("Text color").setDesc("Default text color for blocks").addColorPicker(e=>e.setValue(this.plugin.style.blockTextColor).onChange(async t=>{this.plugin.style.blockTextColor=t,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()}).setDisabled(this.plugin.style.themeAware)),new d.Setting(i).setName("Title text color").setDesc("Default color for block titles").addColorPicker(e=>e.setValue(this.plugin.style.titleTextColor).onChange(async t=>{this.plugin.style.titleTextColor=t,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()}).setDisabled(this.plugin.style.themeAware)),new d.Setting(i).setName("Alternating shading").setDesc("Zebra-style subtle alternating backgrounds").addToggle(e=>e.setValue(this.plugin.style.alternatingShading).onChange(async t=>{this.plugin.style.alternatingShading=t,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()})),new d.Setting(i).setName("Show borders").addToggle(e=>e.setValue(this.plugin.style.showBorders).onChange(async t=>{this.plugin.style.showBorders=t,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()})),new d.Setting(i).setName("Border radius").addSlider(e=>e.setLimits(0,24,1).setValue(this.plugin.style.borderRadius).onChange(async t=>{this.plugin.style.borderRadius=t,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()})),new d.Setting(i).setName("Border thickness").addSlider(e=>e.setLimits(0,8,1).setValue(this.plugin.style.borderThickness).onChange(async t=>{this.plugin.style.borderThickness=t,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()})),i.createEl("h3",{text:"Spacing & Density"}),new d.Setting(i).setName("Inner padding").setDesc("Padding inside each block (px)").addSlider(e=>e.setLimits(0,32,1).setValue(this.plugin.style.blockPadding).onChange(async t=>{this.plugin.style.blockPadding=t,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()})),new d.Setting(i).setName("Gap between blocks").addSlider(e=>e.setLimits(0,24,1).setValue(this.plugin.style.blockGap).onChange(async t=>{this.plugin.style.blockGap=t,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()})),new d.Setting(i).setName("Toolbar visibility").setDesc("Hide/show toolbar region (if present)").addToggle(e=>e.setValue(this.plugin.style.showToolbar).onChange(async t=>{this.plugin.style.showToolbar=t,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()})),i.createEl("h3",{text:"Preview Style Accents"}),new d.Setting(i).setName("Divider hover accent").addColorPicker(e=>e.setValue(this.plugin.style.dividerHoverColor).onChange(async t=>{this.plugin.style.dividerHoverColor=t,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()}).setDisabled(this.plugin.style.themeAware)),new d.Setting(i).setName("Drag active highlight").setDesc("Inner shadow color during resizing").addColorPicker(e=>e.setValue(this.plugin.style.dragActiveShadow).onChange(async t=>{this.plugin.style.dragActiveShadow=t,await this.plugin.saveStyle(),this.plugin.applyStylingVariables()})),i.createEl("h3",{text:"Reset"}),new d.Setting(i).setName("Reset styling to defaults").setDesc("Restores all styling options to their default values.").addButton(e=>e.setButtonText("Reset to defaults").setWarning().onClick(async()=>{if(confirm("Reset divider and block styling to defaults (keeps widths)?")){this.plugin.style={...L};for(let s of Object.keys(this.plugin.settings)){if(!s.startsWith("horizontal-block-layout-"))continue;let n=this.plugin.settings[s];if(n&&typeof n=="object")for(let l of Object.keys(n))(l.startsWith("bg-")||l.startsWith("fg-"))&&delete n[l]}await this.plugin.saveStyle(),this.plugin.applyStylingVariables(),new d.Notice("Horizontal Blocks styling reset (widths preserved)."),this.display()}}))}};

/* nosourcemap */